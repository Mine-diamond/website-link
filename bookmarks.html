<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>收藏夹 - YyMing</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="css/styles.css">

    <!-- 书签页专属紧凑样式 -->
    <style>
        /* ───────── 容器与头部 ───────── */
        .bookmarks-container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: 1.5rem 1rem;
        }
        header.bookmarks-header {
            background: var(--header-bg);
            padding: 1rem 1.25rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 6px var(--shadow-color);
        }
        .header-content {display:flex;align-items:center;justify-content:space-between}
        .header-title   {margin:0;font-size:1.6rem;font-weight:600;color:var(--text-color)}
        .nav-link       {color:var(--text-color);opacity:.75;padding:0.4rem 0.8rem;border-radius:6px;text-decoration:none}
        .nav-link:hover,.nav-link.active{opacity:1;background:var(--group-bg)}

        /* ───────── 控制栏 ───────── */
        .bookmark-controls{background:var(--group-bg);border-radius:12px;padding:1rem;box-shadow:0 2px 6px var(--shadow-color);margin-bottom:1.5rem}
        .bookmark-actions{display:flex;flex-wrap:wrap;gap:.75rem}
        .bookmark-search,.importance-filter{flex:1 1 200px;padding:.55rem .9rem;border-radius:10px;border:2px solid transparent;background:var(--bg-color);font-size:.88rem}
        .bookmark-search:focus,.importance-filter:focus{border-color:#6366f1}
        .add-bookmark-btn{background:#6366f1;color:#fff;border:none;border-radius:10px;padding:.6rem 1.2rem;font-size:.9rem;cursor:pointer;transition:transform .2s}
        .add-bookmark-btn:hover{transform:translateY(-2px)}

        /* ───────── 网格+卡片 ───────── */
        .bookmarks-grid{
            display:grid;
            gap:1rem;
            /* 更小卡片：桌面 ≥1280px 5列 | ≥960px 4列 | ≥640px 3列 | 其余 2/1列 */
            grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
        }
        .bookmark-card{
            position:relative;
            background:var(--card-bg);
            border-radius:10px;
            padding:.9rem;
            box-shadow:0 2px 5px var(--shadow-color);
            transition:transform .18s,box-shadow .18s;
            cursor:pointer;
            /* 取消顶部彩条 */
        }
        .bookmark-card:hover{
            transform:translateY(-3px);
            box-shadow:0 6px 14px var(--shadow-color);
        }
        .card-actions{
            position:absolute;top:6px;right:6px;display:flex;gap:4px;opacity:0;transition:opacity .15s;
        }
        .bookmark-card:hover .card-actions{opacity:1}
        .action-btn{width:26px;height:26px;border:none;border-radius:6px;background:rgba(0,0,0,.7);color:#fff;font-size:12px;display:flex;align-items:center;justify-content:center;cursor:pointer}
        .action-btn.edit:hover   {background:#059669}
        .action-btn.delete:hover {background:#dc2626}

        /* 重新排版：图标-标题-标签 同一张卡里占用较少空间 */
        .card-top{display:flex;align-items:center;gap:.6rem;margin-bottom:.4rem}
        .card-icon-wrapper{flex-shrink:0;width:34px;height:34px;border-radius:8px;background:var(--bg-color);display:flex;align-items:center;justify-content:center}
        .card-icon{width:20px;height:20px;border-radius:4px}
        .card-icon.fallback{background:#6366f1;color:#fff;font-weight:600;font-size:.8rem}

        .card-title{margin:0;font-size:.95rem;font-weight:600;line-height:1.3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .card-title a{color:inherit;text-decoration:none}
        .card-url{font-size:.72rem;opacity:.6;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

        .bookmark-tags{display:flex;flex-wrap:wrap;gap:4px;margin-top:.35rem}
        .tag{font-size:.68rem;background:#6366f1;color:#fff;padding:1px 6px;border-radius:10px}

        .card-meta{display:flex;justify-content:space-between;align-items:center;margin-top:.4rem;font-size:.7rem;opacity:.6}
        .importance-stars{line-height:1}.star{color:#fbbf24}.star.empty{color:rgba(251,191,36,.35)}

        /* ───────── 弹窗(减小) ───────── */
        .modal{backdrop-filter:blur(6px);background:rgba(0,0,0,.55)}
        .modal-content{
            background:var(--bg-color);
            width:92%;max-width:420px;
            border-radius:14px;padding:1.2rem 0 0 0;
            box-shadow:0 12px 28px rgba(0,0,0,.35);
        }
        .modal-header{padding:0 1.4rem;display:flex;align-items:center;margin-bottom:.8rem}
        .modal-title{font-size:1.25rem;font-weight:600}
        .form-group{padding:0 1.4rem;margin-bottom:.8rem}
        .form-group input,.form-group textarea,.form-group select{border-radius:8px;padding:.55rem .85rem;font-size:.88rem}
        .form-actions{padding:0 1.4rem 1.2rem 1.4rem;display:flex;gap:.7rem;justify-content:flex-end}
        .btn-primary{background:#6366f1;color:#fff;border:none;border-radius:10px;padding:.55rem 1.2rem;font-size:.9rem}
        .btn-secondary{background:var(--group-bg);border:none;border-radius:10px;padding:.55rem 1.2rem;font-size:.9rem}

        /* 空／加载状态不变(沿用) */

        /* 响应式小调整 */
        @media(max-width:420px){
            .bookmark-actions{flex-direction:column;align-items:stretch}
        }
    </style>
</head>
<body>
    <div class="bookmarks-container">
        <!-- ========== 头部 ========== -->
        <header class="bookmarks-header">
            <div class="header-content">
                <h1 class="header-title">我的收藏夹</h1>
                <nav class="header-nav">
                    <a class="nav-link" href="index.html">🏠 导航站</a>
                    <a class="nav-link active" href="bookmarks.html">📚 收藏夹</a>
                    <button id="theme-toggle" class="theme-toggle" title="切换主题">🌓</button>
                </nav>
            </div>
        </header>

        <!-- ========== 控制栏 ========== -->
        <div class="bookmark-controls">
            <div class="bookmark-actions">
                <button class="add-bookmark-btn" onclick="openAddBookmarkModal()">＋ 添加书签</button>

                <input id="search-input" class="bookmark-search"
                       type="text" placeholder="🔍 搜索标题、备注或标签..."
                       onkeyup="searchBookmarks()">

                <select id="importance-filter" class="importance-filter" onchange="filterBookmarks()">
                    <option value="">⭐ 全部星级</option>
                    <option value="5">⭐⭐⭐⭐⭐ 5星</option>
                    <option value="4">⭐⭐⭐⭐ 4星及以上</option>
                    <option value="3">⭐⭐⭐ 3星及以上</option>
                    <option value="2">⭐⭐ 2星及以上</option>
                    <option value="1">⭐ 1星及以上</option>
                </select>
            </div>
        </div>

        <!-- ========== 书签网格 ========== -->
        <div id="bookmarks-grid" class="bookmarks-grid"></div>

        <!-- ========== 加载 / 空状态 ========== -->
        <div id="loading" class="loading" style="display:none">正在加载...</div>
        <div id="empty-state" class="empty-state" style="display:none">
            <h3>暂无书签</h3>
            <p>点击上方“添加书签”开始创建吧！</p>
        </div>
    </div>

    <!-- ========== 模态框 ========== -->
    <div id="bookmark-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title" class="modal-title">添加书签</h2>
            </div>
            <form id="bookmark-form">
                <div class="form-group">
                    <label>标题 *</label>
                    <input id="bookmark-title" type="text" required>
                </div>
                <div class="form-group">
                    <label>URL *</label>
                    <input id="bookmark-url" type="url" required>
                </div>
                <div class="form-group">
                    <label>标签 (逗号分隔)</label>
                    <input id="bookmark-tags" type="text" placeholder="工具, 学习">
                </div>
                <div class="form-group">
                    <label>备注</label>
                    <textarea id="bookmark-notes" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label>重要程度</label>
                    <select id="bookmark-importance">
                        <option value="1">⭐ 1</option>
                        <option value="2">⭐⭐ 2</option>
                        <option value="3" selected>⭐⭐⭐ 3</option>
                        <option value="4">⭐⭐⭐⭐ 4</option>
                        <option value="5">⭐⭐⭐⭐⭐ 5</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeBookmarkModal()">取消</button>
                    <button type="submit" class="btn-primary">保存</button>
                </div>
            </form>
        </div>
    </div>

    <!-- JS 依赖 -->
    <script src="js/theme.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/bookmarkAPI.js"></script>
    <script src="js/bookmarks.js"></script>
</body>
</html>
